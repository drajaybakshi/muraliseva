<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MuraliSeva - Lesson 1: Krishna's First Breath</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #FFF8E1 0%, #FFECB3 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Screen styles */
        .screen {
            display: none;
            animation: fadeIn 0.5s ease-in;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .screen.active {
            display: flex;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Typography */
        h1 {
            color: #FF8C00;
            font-size: 36px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        h2 {
            color: #666;
            font-size: 24px;
            margin-bottom: 30px;
            text-align: center;
        }
        
        p {
            line-height: 1.6;
            margin-bottom: 20px;
            font-size: 18px;
            text-align: center;
        }
        
        /* Buttons */
        .button {
            background: #FF8C00;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
            display: inline-block;
            text-align: center;
        }
        
        .button:hover {
            background: #FF7700;
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(255, 140, 0, 0.3);
        }
        
        .button:disabled {
            background: #CCC;
            cursor: not-allowed;
            transform: scale(1);
        }
        
        .button-container {
            text-align: center;
            margin-top: 30px;
        }
        
        /* Progress indicator */
        .progress-dots {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 30px 0;
        }
        
        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #DDD;
            transition: all 0.3s ease;
        }
        
        .dot.active {
            background: #FF8C00;
            transform: scale(1.2);
        }
        
        .dot.completed {
            background: #4CAF50;
        }
        
        /* Achievement popup */
        .achievement {
            position: fixed;
            top: 20px;
            right: -300px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            transition: right 0.3s ease;
            z-index: 1000;
        }
        
        .achievement.show {
            right: 20px;
        }
        
        .achievement-icon {
            font-size: 40px;
            text-align: center;
            margin-bottom: 10px;
        }
        
        /* Krishna animation */
        .krishna-container {
            text-align: center;
            margin: 30px 0;
        }
        
        .krishna-image {
            font-size: 120px;
            animation: float 3s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }
        
        /* Breath exercise */
        .breath-circle {
            width: 200px;
            height: 200px;
            border: 4px solid #4CAF50;
            border-radius: 50%;
            margin: 30px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            transition: all 0.3s ease;
            background: rgba(76, 175, 80, 0.1);
        }
        
        .breath-circle.inhale {
            transform: scale(1.2);
            background: rgba(76, 175, 80, 0.2);
        }
        
        .breath-circle.exhale {
            transform: scale(0.8);
            background: rgba(255, 140, 0, 0.2);
            border-color: #FF8C00;
        }
        
        /* Flute practice */
        .flute-visual {
            text-align: center;
            margin: 30px 0;
            font-size: 80px;
        }
        
        .note-display {
            font-size: 48px;
            color: #FF8C00;
            text-align: center;
            margin: 20px 0;
            font-weight: bold;
        }
        
        /* Completion screen */
        .completion-stats {
            background: white;
            padding: 30px;
            border-radius: 12px;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .stat-row {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            font-size: 18px;
        }
        
        .stat-value {
            color: #FF8C00;
            font-weight: bold;
        }
        
        /* Loading state */
        .loading {
            text-align: center;
            color: #666;
            font-style: italic;
        }
    </style>
</head>
<body>
    <!-- Screen 1: Welcome -->
    <div id="screen1" class="screen active">
        <div class="container">
            <h1>üéµ Lesson 1: Krishna's First Breath üéµ</h1>
            <div class="krishna-container">
                <div class="krishna-image">üë∂</div>
            </div>
            <p>In Gokul, when Krishna took His first breath,<br>
            the universe filled with divine music.<br>
            Today, you begin your journey to find<br>
            that same sacred sound within your breath.</p>
            
            <div class="button-container">
                <button class="button" onclick="nextScreen()">Begin Sacred Journey</button>
            </div>
            
            <div class="progress-dots">
                <div class="dot active"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
        </div>
    </div>
    
    <!-- Screen 2: Pranaam & Preparation -->
    <div id="screen2" class="screen">
        <div class="container">
            <h1>üôè Pranaam & Preparation üôè</h1>
            <div class="flute-visual">ü™à</div>
            
            <p>Hold your bansuri with both hands at heart level.<br>
            Take a moment to offer your respect to this sacred instrument.</p>
            
            <div class="breath-circle" id="breathCircle">
                <span id="breathText">Breathe</span>
            </div>
            
            <p id="breathInstruction">Place one hand on your belly. Watch it expand and contract.</p>
            
            <div class="button-container">
                <button class="button" onclick="startBreathExercise()">Start Breathing Exercise</button>
                <button class="button" onclick="nextScreen()" style="display:none;" id="continueBtn2">Continue</button>
            </div>
            
            <div class="progress-dots">
                <div class="dot completed"></div>
                <div class="dot active"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
        </div>
    </div>
    
    <!-- Screen 3: Finding Sa -->
    <div id="screen3" class="screen">
        <div class="container">
            <h1>üéµ Finding Your First Note - Sa üéµ</h1>
            
            <div class="note-display">Sa</div>
            
            <p>Listen to the sacred sound of Sa.<br>
            This is the foundation of all music.</p>
            
            <div class="button-container">
                <button class="button" onclick="playReferenceNote()">üîä Play Sa</button>
            </div>
            
            <p style="margin-top: 30px;">Now, gently blow into your bansuri.<br>
            All holes should be covered.</p>
            
            <div class="flute-visual">ü™à</div>
            
            <div class="button-container">
                <button class="button" onclick="simulatePractice()">Practice Sa</button>
                <button class="button" onclick="nextScreen()" style="display:none;" id="continueBtn3">Beautiful! Continue</button>
            </div>
            
            <div class="progress-dots">
                <div class="dot completed"></div>
                <div class="dot completed"></div>
                <div class="dot active"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
        </div>
    </div>
    
    <!-- Screen 4: Sa-Re Alternation -->
    <div id="screen4" class="screen">
        <div class="container">
            <h1>‚ú® Krishna's Dance ‚ú®</h1>
            
            <p>Just as baby Krishna's first sounds<br>
            delighted Mother Yashoda,<br>
            your first Sa has begun your journey.</p>
            
            <div class="krishna-container">
                <div class="krishna-image">üíÉ</div>
            </div>
            
            <p>In Bhagavata Purana, it's said that<br>
            when Krishna first touched the flute,<br>
            even the wind stopped to listen.</p>
            
            <div class="button-container">
                <button class="button" onclick="playSaAgain()">Play Your Sa Once More</button>
                <button class="button" onclick="nextScreen()" id="continueBtn4">Continue Journey</button>
            </div>
            
            <div class="progress-dots">
                <div class="dot completed"></div>
                <div class="dot completed"></div>
                <div class="dot completed"></div>
                <div class="dot active"></div>
                <div class="dot"></div>
                <div class="dot"></div>
            </div>
        </div>
    </div>
    
    <!-- Screen 5: Wellness Reflection -->
    <div id="screen5" class="screen">
        <div class="container">
            <h1>üå∏ Wellness Reflection üå∏</h1>
            
            <p>Notice how you feel now.<br>
            Is your breath deeper?<br>
            Is your mind calmer?<br>
            This is the beginning of BansuriPrana.</p>
            
            <div class="breath-circle">
                <span>Peaceful</span>
            </div>
            
            <p>Your breath rate has improved.<br>
            Your focus has deepened.<br>
            Krishna's blessings flow through you.</p>
            
            <div class="button-container">
                <button class="button" onclick="nextScreen()">Complete Lesson</button>
            </div>
            
            <div class="progress-dots">
                <div class="dot completed"></div>
                <div class="dot completed"></div>
                <div class="dot completed"></div>
                <div class="dot completed"></div>
                <div class="dot active"></div>
                <div class="dot"></div>
            </div>
        </div>
    </div>
    
    <!-- Screen 6: Completion -->
    <div id="screen6" class="screen">
        <div class="container">
            <h1>üéâ Today's Seva Complete! üéâ</h1>
            
            <div class="krishna-container">
                <div class="krishna-image">üôè</div>
            </div>
            
            <div class="completion-stats">
                <h2>Your Offering to Krishna:</h2>
                <div class="stat-row">
                    <span>üéµ Musical:</span>
                    <span class="stat-value">3 perfect Sa notes achieved</span>
                </div>
                <div class="stat-row">
                    <span>üå¨Ô∏è Prana:</span>
                    <span class="stat-value">6-count exhales mastered</span>
                </div>
                <div class="stat-row">
                    <span>üôè Bhakti:</span>
                    <span class="stat-value">First connection established</span>
                </div>
            </div>
            
            <div class="button-container">
                <button class="button" onclick="backToDashboard()">Return to Dashboard</button>
                <button class="button" onclick="practiceMore()">Practice More</button>
            </div>
            
            <div class="progress-dots">
                <div class="dot completed"></div>
                <div class="dot completed"></div>
                <div class="dot completed"></div>
                <div class="dot completed"></div>
                <div class="dot completed"></div>
                <div class="dot completed"></div>
            </div>
        </div>
    </div>
    
    <!-- Achievement Popup -->
    <div id="achievement" class="achievement">
        <div class="achievement-icon">üèÜ</div>
        <h3>Achievement Unlocked!</h3>
        <p id="achievementText">Sacred Beginning</p>
    </div>
    
    <!-- Audio Context -->
    <audio id="saNote" preload="auto">
        <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQoGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=" type="audio/wav">
    </audio>
    
    <script>
        let currentScreen = 1;
        let breathCount = 0;
        let practiceCount = 0;
        let audioContext;
        
        function nextScreen() {
            // Hide current screen
            document.getElementById(`screen${currentScreen}`).classList.remove('active');
            
            // Show next screen
            currentScreen++;
            if (currentScreen <= 6) {
                setTimeout(() => {
                    document.getElementById(`screen${currentScreen}`).classList.add('active');
                }, 300);
            }
        }
        
        function showAchievement(text) {
            const achievement = document.getElementById('achievement');
            document.getElementById('achievementText').textContent = text;
            achievement.classList.add('show');
            
            setTimeout(() => {
                achievement.classList.remove('show');
            }, 3000);
        }
        
        function startBreathExercise() {
            const circle = document.getElementById('breathCircle');
            const text = document.getElementById('breathText');
            const instruction = document.getElementById('breathInstruction');
            const button = event.target;
            
            button.disabled = true;
            breathCount = 0;
            
            function breathCycle() {
                if (breathCount >= 3) {
                    text.textContent = 'Complete!';
                    instruction.textContent = 'Excellent! Your breath is now steady and deep.';
                    document.getElementById('continueBtn2').style.display = 'inline-block';
                    showAchievement('Breath Awareness Unlocked');
                    return;
                }
                
                // Inhale
                circle.classList.add('inhale');
                circle.classList.remove('exhale');
                text.textContent = 'Inhale';
                instruction.textContent = 'Breathe in slowly through your nose...';
                
                setTimeout(() => {
                    // Exhale
                    circle.classList.remove('inhale');
                    circle.classList.add('exhale');
                    text.textContent = 'Exhale';
                    instruction.textContent = 'Breathe out gently through your mouth...';
                    
                    setTimeout(() => {
                        breathCount++;
                        breathCycle();
                    }, 3000);
                }, 3000);
            }
            
            breathCycle();
        }
        
        function playReferenceNote() {
            if (!audioContext) {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
            }
            
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.value = 261.63; // C4 (Sa)
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0, audioContext.currentTime);
            gainNode.gain.linearRampToValueAtTime(0.3, audioContext.currentTime + 0.1);
            gainNode.gain.linearRampToValueAtTime(0, audioContext.currentTime + 1.5);
            
            oscillator.start();
            oscillator.stop(audioContext.currentTime + 1.5);
        }
        
        function simulatePractice() {
            const button = event.target;
            button.disabled = true;
            button.textContent = 'Listening...';
            
            setTimeout(() => {
                practiceCount++;
                if (practiceCount >= 3) {
                    button.textContent = 'Perfect! 3 Sa notes achieved!';
                    document.getElementById('continueBtn3').style.display = 'inline-block';
                    showAchievement('First Sa Mastered!');
                } else {
                    button.textContent = `Good! ${practiceCount}/3 - Try again`;
                    button.disabled = false;
                }
            }, 2000);
        }
        
        function playSaAgain() {
            playReferenceNote();
            showAchievement('Krishna Smiles Upon You');
        }
        
        function backToDashboard() {
            // Save progress
            const progress = {
                lesson1: {
                    completed: true,
                    stars: 3,
                    achievements: ['Sacred Beginning', 'First Sa Mastered'],
                    date: new Date().toISOString()
                }
            };
            localStorage.setItem('muraliSevaProgress', JSON.stringify(progress));
            
            // In a real app, navigate to dashboard
            alert('Progress saved! In the full app, this would return to your dashboard.');
            // window.location.href = 'dashboard.html';
        }
        
        function practiceMore() {
            // Reset to practice screen
            currentScreen = 2;
            document.getElementById('screen6').classList.remove('active');
            document.getElementById('screen3').classList.add('active');
            practiceCount = 0;
            document.getElementById('continueBtn3').style.display = 'none';
        }
        
        // Initialize
        window.addEventListener('load', () => {
            showAchievement('Welcome to MuraliSeva!');
        });
    </script>
</body>
</html>
